
SELECT SUM(value) AS TOTAL_SGA_SIZE
FROM V$SGA;

SELECT * FROM dba_data_files;
SELECT * FROM dba_tablespaces;
ALTER DATABASE DATAFILE '/opt/oracle/homes/OraDBHome21cXE/dbs/users_tablespace.dbf' RESIZE 2G;


-- Увеличение лимита PDB
ALTER PLUGGABLE DATABASE COURSEPDB STORAGE (MAXSIZE 10G);

-- Создание UNDO табличного пространства
CREATE UNDO TABLESPACE undo_tbs
DATAFILE 'undo_tbs01.dbf' SIZE 100M
AUTOEXTEND ON NEXT 10M MAXSIZE UNLIMITED;

-- Назначение UNDO как активного

CREATE PLUGGABLE DATABASE coursePDB
  ADMIN USER adminPDB IDENTIFIED BY oracle
  ROLES = (dba)
  DEFAULT TABLESPACE opdbtblsp
    DATAFILE '/opt/oracle/oradata/XE/coursePDB/coursePDB.dbf' SIZE 500M AUTOEXTEND ON
  FILE_NAME_CONVERT = ('/opt/oracle/oradata/XE/pdbseed/',
                   '/opt/oracle/oradata/XE/coursePDB/')
  STORAGE (MAXSIZE 10G)
  PATH_PREFIX = '/opt/oracle/oradata/XE/coursePDB/';

select name from v$datafile;

ALTER PLUGGABLE DATABASE coursePDB OPEN READ WRITE;
ALTER PLUGGABLE DATABASE coursePDB SAVE STATE;


ALTER PLUGGABLE DATABASE VKS_PDB OPEN READ WRITE;

SELECT VIEW_NAME
FROM ALL_VIEWS order by VIEW_NAME;

SELECT FILE_NAME, TABLESPACE_NAME, BYTES/1024/1024 AS SIZE_MB
FROM USER_TEMP_FILES;

select * from DBA_ROLES;

SELECT *
FROM user_segments
WHERE segment_type = 'TABLE'
ORDER BY BYTES DESC
FETCH FIRST 1 ROW ONLY;

SELECT tablespace_name, block_size
FROM dba_tablespaces;


SELECT value 
FROM v$parameter
WHERE name = 'db_block_size';

SELECT *
FROM v$parameter;

SELECT name AS control_file
FROM v$controlfile;

SELECT owner, 
       ROUND(SUM(space) * 8192 / 1024 / 1024, 2) AS size_mb
FROM dba_recyclebin
GROUP BY owner;

SELECT name AS service_name, 
       network_name, 
       creation_date
FROM v$services;

SELECT spid AS os_process_id, 
       program, 
       background
FROM v$process
WHERE background IS NOT NULL;

SELECT name AS database_name
FROM v$database;

SELECT *
FROM v$sgastat
WHERE name = 'free memory'and pool = 'shared pool';

SELECT owner, 
       object_name, 
       object_type, 
       created, 
       status
FROM dba_objects
WHERE owner = USER
ORDER BY object_type, object_name;

SELECT instance_name
FROM v$instance;

SHOW PARAMETER log_archive_start;

SELECT * 
FROM v$database;

show PDBS;

SELECT name AS pdb_name, 
       open_mode 
FROM v$pdbs;

SELECT * 
FROM dba_recyclebin;

SELECT username, 
       user_id, 
       common, 
       created 
FROM dba_users 
WHERE common = 'YES';


ALTER PLUGGABLE DATABASE VKS_PDB OPEN READ WRITE;

GRANT ADMINISTER DATABASE TRIGGER TO VKS;


drop table TEACHER;
drop table AUDITORIUM;
drop table PULPIT;
drop table SUBJECT;
drop table AUDITORIUM_TYPE;
drop table FACULTY;


-- Таблица типов аудиторий

CREATE TABLE AUDITORIUM_TYPE (
    AUDITORIUM_TYPE VARCHAR2(10) PRIMARY KEY,
    AUDITORIUM_TYPENAME VARCHAR2(50) NOT NULL
);

-- Таблица факультетов
CREATE TABLE FACULTY (
    FACULTY VARCHAR2(10) PRIMARY KEY,
    FACULTY_NAME VARCHAR2(100) NOT NULL
);


-- Таблица кафедр
CREATE TABLE PULPIT (
    PULPIT_NAME VARCHAR2(10) PRIMARY KEY,
    PULPIT VARCHAR2(100) NOT NULL,
    FACULTY VARCHAR2(10),
    FOREIGN KEY (FACULTY) REFERENCES FACULTY(FACULTY)
);

-- Таблица аудиторий
CREATE TABLE AUDITORIUM (
    AUDITORIUM_NAME VARCHAR2(10) PRIMARY KEY,
    AUDITORIUM_CAPACITY NUMBER NOT NULL,
    AUDITORIUM_TYPE VARCHAR2(10),
    FOREIGN KEY (AUDITORIUM_TYPE) REFERENCES AUDITORIUM_TYPE(AUDITORIUM_TYPE)
);

-- Таблица преподавателей
CREATE TABLE TEACHER (
    TEACHER_NAME VARCHAR2(100) PRIMARY KEY,
    PULPIT VARCHAR2(10),
    FOREIGN KEY (PULPIT) REFERENCES PULPIT(PULPIT_NAME)
);

-- Таблица предметов
CREATE TABLE SUBJECT (
    SUBJECT_NAME VARCHAR2(100) PRIMARY KEY,
    PULPIT VARCHAR2(10),
    FOREIGN KEY (PULPIT) REFERENCES PULPIT(PULPIT_NAME)
);



-- Данные для типов аудиторий
INSERT INTO AUDITORIUM_TYPE (AUDITORIUM_TYPE, AUDITORIUM_TYPENAME) VALUES ('L', 'Lecture');
INSERT INTO AUDITORIUM_TYPE (AUDITORIUM_TYPE, AUDITORIUM_TYPENAME) VALUES ('P', 'Practical');
INSERT INTO AUDITORIUM_TYPE (AUDITORIUM_TYPE, AUDITORIUM_TYPENAME) VALUES ('LA', 'Laboratory');

-- Данные для факультетов
INSERT INTO FACULTY (FACULTY, FACULTY_NAME) VALUES ('CS', 'Computer Science');
INSERT INTO FACULTY (FACULTY, FACULTY_NAME) VALUES ('MATH', 'Mathematics');
INSERT INTO FACULTY (FACULTY, FACULTY_NAME) VALUES ('PHYS', 'Physics');

-- Данные для кафедр
INSERT INTO PULPIT (PULPIT_NAME, PULPIT, FACULTY) VALUES ('CS101', 'Software Engineering', 'CS');
INSERT INTO PULPIT (PULPIT_NAME, PULPIT, FACULTY) VALUES ('MATH102', 'Applied Mathematics', 'MATH');
INSERT INTO PULPIT (PULPIT_NAME, PULPIT, FACULTY) VALUES ('PHYS103', 'Quantum Mechanics', 'PHYS');

-- Данные для аудиторий
INSERT INTO AUDITORIUM (AUDITORIUM_NAME, AUDITORIUM_CAPACITY, AUDITORIUM_TYPE) VALUES ('A101', 100, 'L');
INSERT INTO AUDITORIUM (AUDITORIUM_NAME, AUDITORIUM_CAPACITY, AUDITORIUM_TYPE) VALUES ('P202', 50, 'P');
INSERT INTO AUDITORIUM (AUDITORIUM_NAME, AUDITORIUM_CAPACITY, AUDITORIUM_TYPE) VALUES ('L303', 30, 'L');

-- Данные для преподавателей
INSERT INTO TEACHER (TEACHER_NAME, PULPIT) VALUES ('Dr. John Doe', 'CS101');
INSERT INTO TEACHER (TEACHER_NAME, PULPIT) VALUES ('Prof. Jane Smith', 'MATH102');
INSERT INTO TEACHER (TEACHER_NAME, PULPIT) VALUES ('Dr. Alan Turing', 'PHYS103');

-- Данные для предметов
INSERT INTO SUBJECT (SUBJECT_NAME, PULPIT) VALUES ('Algorithms', 'CS101');
INSERT INTO SUBJECT (SUBJECT_NAME, PULPIT) VALUES ('Calculus', 'MATH102');
INSERT INTO SUBJECT (SUBJECT_NAME, PULPIT) VALUES ('Quantum Physics', 'PHYS103');

ALTER TABLE TEACHER ADD (BIRTHDAY DATE, SALARY NUMBER);

UPDATE TEACHER SET BIRTHDAY = TO_DATE('1980-05-12', 'YYYY-MM-DD'), SALARY = 80000 WHERE TEACHER_NAME = 'Dr. John Doe';
UPDATE TEACHER SET BIRTHDAY = TO_DATE('1975-08-18', 'YYYY-MM-DD'), SALARY = 90000 WHERE TEACHER_NAME = 'Prof. Jane Smith';
UPDATE TEACHER SET BIRTHDAY = TO_DATE('1912-06-23', 'YYYY-MM-DD'), SALARY = 100000 WHERE TEACHER_NAME = 'Dr. Alan Turing';


INSERT INTO TEACHER (TEACHER_NAME, PULPIT, BIRTHDAY, SALARY) VALUES ('Ivanov Ivan Ivanovich', 'CS101', TO_DATE('1980-01-15', 'YYYY-MM-DD'), 60000);
INSERT INTO TEACHER (TEACHER_NAME, PULPIT, BIRTHDAY, SALARY) VALUES ('Petrov Petr Petrovich', 'MATH102', TO_DATE('1975-02-20', 'YYYY-MM-DD'), 75000);
INSERT INTO TEACHER (TEACHER_NAME, PULPIT, BIRTHDAY, SALARY) VALUES ('Sidorov Sergey Sidorovich', 'PHYS103', TO_DATE('1988-03-10', 'YYYY-MM-DD'), 85000);
INSERT INTO TEACHER (TEACHER_NAME, PULPIT, BIRTHDAY, SALARY) VALUES ('Nikolaev Nikolay Nikolaevich', 'CS101', TO_DATE('1990-04-05', 'YYYY-MM-DD'), 72000);
INSERT INTO TEACHER (TEACHER_NAME, PULPIT, BIRTHDAY, SALARY) VALUES ('Fedorov Fedor Fedorovich', 'MATH102', TO_DATE('1983-05-12', 'YYYY-MM-DD'), 68000);
INSERT INTO TEACHER (TEACHER_NAME, PULPIT, BIRTHDAY, SALARY) VALUES ('Alexeev Alexey Alexeevich', 'PHYS103', TO_DATE('1978-06-25', 'YYYY-MM-DD'), 90000);
INSERT INTO TEACHER (TEACHER_NAME, PULPIT, BIRTHDAY, SALARY) VALUES ('Ivanova Anna Ivanovna', 'CS101', TO_DATE('1987-07-30', 'YYYY-MM-DD'), 65000);
INSERT INTO TEACHER (TEACHER_NAME, PULPIT, BIRTHDAY, SALARY) VALUES ('Petrova Olga Petrovna', 'MATH102', TO_DATE('1995-08-16', 'YYYY-MM-DD'), 72000);
INSERT INTO TEACHER (TEACHER_NAME, PULPIT, BIRTHDAY, SALARY) VALUES ('Sidorova Maria Sidorovna', 'PHYS103', TO_DATE('1982-09-22', 'YYYY-MM-DD'), 77000);
INSERT INTO TEACHER (TEACHER_NAME, PULPIT, BIRTHDAY, SALARY) VALUES ('Nikolaeva Natalia Nikolaevna', 'CS101', TO_DATE('1991-10-11', 'YYYY-MM-DD'), 64000);
INSERT INTO TEACHER (TEACHER_NAME, PULPIT, BIRTHDAY, SALARY) VALUES ('Fedorova Elena Fedorovna', 'MATH102', TO_DATE('1979-11-19', 'YYYY-MM-DD'), 88000);
INSERT INTO TEACHER (TEACHER_NAME, PULPIT, BIRTHDAY, SALARY) VALUES ('Alexeeva Ekaterina Alexeevna', 'PHYS103', TO_DATE('1986-12-03', 'YYYY-MM-DD'), 95000);
INSERT INTO TEACHER (TEACHER_NAME, PULPIT, BIRTHDAY, SALARY) VALUES ('Smirnov Sergey Ivanovich', 'CS101', TO_DATE('1984-01-14', 'YYYY-MM-DD'), 71000);
INSERT INTO TEACHER (TEACHER_NAME, PULPIT, BIRTHDAY, SALARY) VALUES ('Smirnova Irina Petrovna', 'MATH102', TO_DATE('1990-02-27', 'YYYY-MM-DD'), 80000);
INSERT INTO TEACHER (TEACHER_NAME, PULPIT, BIRTHDAY, SALARY) VALUES ('Kuznetsov Alexey Nikolayevich', 'PHYS103', TO_DATE('1981-03-19', 'YYYY-MM-DD'), 78000);
INSERT INTO TEACHER (TEACHER_NAME, PULPIT, BIRTHDAY, SALARY) VALUES ('Kuznetsova Marina Fedorovna', 'CS101', TO_DATE('1977-04-28', 'YYYY-MM-DD'), 83000);
INSERT INTO TEACHER (TEACHER_NAME, PULPIT, BIRTHDAY, SALARY) VALUES ('Popov Dmitry Sergeevich', 'MATH102', TO_DATE('1989-05-15', 'YYYY-MM-DD'), 69000);
INSERT INTO TEACHER (TEACHER_NAME, PULPIT, BIRTHDAY, SALARY) VALUES ('Popova Olga Alexandrovna', 'PHYS103', TO_DATE('1994-06-21', 'YYYY-MM-DD'), 74000);
INSERT INTO TEACHER (TEACHER_NAME, PULPIT, BIRTHDAY, SALARY) VALUES ('Vasilyev Ivan Dmitrievich', 'CS101', TO_DATE('1985-07-08', 'YYYY-MM-DD'), 81000);
INSERT INTO TEACHER (TEACHER_NAME, PULPIT, BIRTHDAY, SALARY) VALUES ('Vasilyeva Anna Ivanovna', 'MATH102', TO_DATE('1983-08-13', 'YYYY-MM-DD'), 67000);


INSERT INTO PULPIT (PULPIT_NAME, PULPIT, FACULTY) VALUES ('CS102', 'Data Science', 'CS');
INSERT INTO PULPIT (PULPIT_NAME, PULPIT, FACULTY) VALUES ('CS103', 'Cybersecurity', 'CS');

INSERT INTO PULPIT (PULPIT_NAME, PULPIT, FACULTY) VALUES ('MATH103', 'Statistics', 'MATH');
INSERT INTO PULPIT (PULPIT_NAME, PULPIT, FACULTY) VALUES ('MATH104', 'Theoretical Mathematics', 'MATH');

INSERT INTO PULPIT (PULPIT_NAME, PULPIT, FACULTY) VALUES ('PHYS104', 'Astrophysics', 'PHYS');
INSERT INTO PULPIT (PULPIT_NAME, PULPIT, FACULTY) VALUES ('PHYS105', 'Nuclear Physics', 'PHYS');

INSERT INTO TEACHER (TEACHER_NAME, PULPIT, BIRTHDAY, SALARY) 
VALUES ('Novikov Andrey Olegovich', 'CS102', TO_DATE('1985-04-12', 'YYYY-MM-DD'), 70000);
INSERT INTO TEACHER (TEACHER_NAME, PULPIT, BIRTHDAY, SALARY) 
VALUES ('Fedorova Marina Petrovna', 'CS102', TO_DATE('1992-11-08', 'YYYY-MM-DD'), 65000);

INSERT INTO TEACHER (TEACHER_NAME, PULPIT, BIRTHDAY, SALARY) 
VALUES ('Krylov Sergey Borisovich', 'CS103', TO_DATE('1980-06-18', 'YYYY-MM-DD'), 72000);
INSERT INTO TEACHER (TEACHER_NAME, PULPIT, BIRTHDAY, SALARY) 
VALUES ('Belova Olga Nikolaevna', 'CS103', TO_DATE('1990-02-27', 'YYYY-MM-DD'), 60000);

INSERT INTO TEACHER (TEACHER_NAME, PULPIT, BIRTHDAY, SALARY) 
VALUES ('Morozov Pavel Ivanovich', 'MATH103', TO_DATE('1983-03-14', 'YYYY-MM-DD'), 59000);
INSERT INTO TEACHER (TEACHER_NAME, PULPIT, BIRTHDAY, SALARY) 
VALUES ('Vasilieva Elena Andreevna', 'MATH103', TO_DATE('1979-08-20', 'YYYY-MM-DD'), 62000);

INSERT INTO TEACHER (TEACHER_NAME, PULPIT, BIRTHDAY, SALARY) 
VALUES ('Gromov Viktor Petrovich', 'MATH104', TO_DATE('1975-05-25', 'YYYY-MM-DD'), 65000);
INSERT INTO TEACHER (TEACHER_NAME, PULPIT, BIRTHDAY, SALARY) 
VALUES ('Stepanova Alina Dmitrievna', 'MATH104', TO_DATE('1995-10-30', 'YYYY-MM-DD'), 58000);

INSERT INTO TEACHER (TEACHER_NAME, PULPIT, BIRTHDAY, SALARY) 
VALUES ('Kuzina Natalia Alexandrovna', 'PHYS104', TO_DATE('1987-07-15', 'YYYY-MM-DD'), 63000);
INSERT INTO TEACHER (TEACHER_NAME, PULPIT, BIRTHDAY, SALARY) 
VALUES ('Sobolev Mikhail Viktorovich', 'PHYS104', TO_DATE('1982-09-05', 'YYYY-MM-DD'), 69000);

INSERT INTO TEACHER (TEACHER_NAME, PULPIT, BIRTHDAY, SALARY) 
VALUES ('Antonov Dmitry Sergeevich', 'PHYS105', TO_DATE('1978-01-22', 'YYYY-MM-DD'), 72000);
INSERT INTO TEACHER (TEACHER_NAME, PULPIT, BIRTHDAY, SALARY) 
VALUES ('Borodina Olga Vladimirovna', 'PHYS105', TO_DATE('1988-03-03', 'YYYY-MM-DD'), 61000);

INSERT INTO SUBJECT (SUBJECT_NAME, PULPIT) VALUES ('Machine Learning', 'CS102');
INSERT INTO SUBJECT (SUBJECT_NAME, PULPIT) VALUES ('Big Data Analysis', 'CS102');

INSERT INTO SUBJECT (SUBJECT_NAME, PULPIT) VALUES ('Network Security', 'CS103');
INSERT INTO SUBJECT (SUBJECT_NAME, PULPIT) VALUES ('Cryptography', 'CS103');

INSERT INTO SUBJECT (SUBJECT_NAME, PULPIT) VALUES ('Probability Theory', 'MATH103');
INSERT INTO SUBJECT (SUBJECT_NAME, PULPIT) VALUES ('Data Visualization', 'MATH103');

INSERT INTO SUBJECT (SUBJECT_NAME, PULPIT) VALUES ('Abstract Algebra', 'MATH104');
INSERT INTO SUBJECT (SUBJECT_NAME, PULPIT) VALUES ('Number Theory', 'MATH104');

INSERT INTO SUBJECT (SUBJECT_NAME, PULPIT) VALUES ('Stellar Dynamics', 'PHYS104');
INSERT INTO SUBJECT (SUBJECT_NAME, PULPIT) VALUES ('Cosmology', 'PHYS104');

INSERT INTO SUBJECT (SUBJECT_NAME, PULPIT) VALUES ('Nuclear Reactions', 'PHYS105');
INSERT INTO SUBJECT (SUBJECT_NAME, PULPIT) VALUES ('Particle Physics', 'PHYS105');


commit;


